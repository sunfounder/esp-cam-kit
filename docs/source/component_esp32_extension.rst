 .. note::

    こんにちは、SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasts Communityへようこそ！Facebookで仲間と一緒にRaspberry Pi、Arduino、ESP32の世界を深く探求しましょう。

    **参加のメリット**

    - **専門サポート**：購入後の問題や技術的な課題をコミュニティとチームの助けを借りて解決。
    - **学びと共有**：スキルを向上させるためのヒントやチュートリアルを交換。
    - **限定プレビュー**：新製品の発表や先行情報に早期アクセス。
    - **特別割引**：最新製品の独占割引を享受。
    - **イベントとプレゼント**：イベントやプレゼント企画に参加。

    👉 私たちと一緒に探求と創造を楽しむ準備はできましたか？クリックして今日から参加しましょう：[|link_sf_facebook|]！

.. _cpn_esp32_camera_extension:

ESP32 カメラ拡張ボード
==========================

私たちは、ESP32 WROOM 32EのカメラとSDカード機能を最大限に活用できる拡張ボードを設計しました。OV2640カメラ、Micro SD、ESP32 WROOM 32Eを組み合わせることで、オールインワンの拡張ボードが完成しました。

ボードには2種類のGPIOヘッダがあり、一つはクイックプロトタイピングプロジェクトに最適なメスヘッダ、もう一つは安定した配線接続を保証するスクリュー端子です。これにより、IoTプロジェクトにも適しています。

さらに、単一の3.7V 18650バッテリーを使用してプロジェクトに電力を供給できます。バッテリーが低下した場合でも、5V Micro USBケーブルを接続するだけで簡単に充電できます。これにより、屋外プロジェクトやリモートアプリケーションに最適です。

.. image:: img/esp32_camera_extension.jpg
    :width: 400
    :align: center

.. image:: img/esp32_camera_extension_size.png
    :width: 400
    :align: center


仕様表
------------------------

.. list-table::
    :widths: 30 10 10 10 10
    :header-rows: 1

    *   - パラメータ
        - 最小値
        - 標準値
        - 最大値
        - 単位
    *   - バッテリーシャットダウン電流
        - \-
        - \-
        - 60
        - uA
    *   - DC-DC出力電圧
        - 4.9129
        - 5
        - 5.0889
        - V
    *   - DC-DC過温度保護
        - \-
        - 150
        - \-
        - ℃
    *   - バッテリー充電電流
        - \-
        - \-
        - 500
        - mA
    *   - 充電過温度保護
        - \-
        - 130
        - \-
        - ℃
    *   - 入力低電圧スイッチングしきい値
        - \-
        - 3.4
        - \-
        - V

インターフェース紹介
-------------------------

.. image:: img/esp32_camera_extension_pinout.jpg
    :width: 800
    :align: center

* **電源スイッチ**
    * バッテリーの電源供給を制御し、オンとオフを切り替えます。

* **充電ポート**
    * 5V/0.5AのMicro USBケーブルを接続すると、バッテリーを充電できます。

* **バッテリーポート**
    * PH2.0-2Pインターフェースを備え、3.7Vの18650リチウムバッテリーに対応。
    * ESP32 WROOM 32EとESP32カメラ拡張ボードに電力を供給します。

* **ESP32ピンヘッダー**
    * ESP32 WROOM 32Eモジュール用です。向きを注意して、両方のMicro USBポートが同じ側に向くようにしてください。逆に配置しないように注意してください。

* **GPIOヘッダー**
    * **メスヘッダー**：ESP32にさまざまなコンポーネントを接続するために使用され、迅速なプロトタイピングプロジェクトに最適です。
    * **スクリュー端子**：ピッチ3.5mmの14ピンのスクリュー端子で、安定した配線接続を保証し、IoTプロジェクトに適しています。

* **インジケータライト**
    * **PWR**：バッテリーが給電されているとき、またはMicro USBが直接ESP32に接続されているときに点灯します。
    * **CHG**：Micro USBをボードの充電ポートに接続すると点灯し、充電開始を示します。バッテリーが完全に充電されると消灯します。

* **Micro SDコネクター**
    * Micro SDカードの挿入と取り出しを容易にするスプリング付きスロットです。

* **24ピン0.5mm FFC / FPCコネクター**
    * OV2640カメラ用に設計されており、さまざまなビジョン関連のプロジェクトに適しています。


ピンマッピングテーブル
--------------------------------

ESP32 WROOM 32Eのピン配置図は、:ref:`esp32_pinout` にあります。

ただし、ESP32 WROOM 32Eを拡張ボードに挿入すると、一部のピンがMicro SDカードやカメラを駆動するために使用される場合があります。

したがって、これらのピンにはプルアップまたはプルダウン抵抗が追加されています。これらのピンを入力として使用する場合、これらの抵抗が入力レベルに影響を与える可能性があるため、注意が必要です。

.. note::

    オンボードの8M PSRAMはカメラに十分なRAMを提供します。PSRAMはIO16とIO17を占有します。したがって、拡張ヘッダーおよび拡張スクリュー端子はIO16およびIO17を拡張しません。

右側のピンのピンマッピングテーブルは以下の通りです：

    .. image:: img/esp32_extension_pinout1.jpg
        :width: 100%
        :align: center

左側のピンのピンマッピングテーブルは以下の通りです：

    .. image:: img/esp32_extension_pinout2.jpg
        :width: 100%
        :align: center

    .. note::

        いくつかの特定の制約があります：

        * **IO33** は4.7Kのプルアップ抵抗とフィルタリングコンデンサに接続されているため、WS2812 RGBストリップを駆動することはできません。

**Micro SDコネクターのピンマッピングテーブル**

.. list-table::
    :widths: 10 10
    :header-rows: 1

    *   - Micro SDコネクター
        - ESP32
    *   - D0
        - IO2
    *   - D1
        - IO4
    *   - D2
        - IO12
    *   - D3
        - IO13
    *   - CLK
        - IO14
    *   - CMD
        - IO15

**FFC / FPCコネクターのピンマッピングテーブル**

カメラインターフェースは主にOV2640を使用し、8225カメラと互換性があります。インターフェースは、ピッチ0.5mmの24Pフリップダウン接続のFFCコネクターを採用しています。

.. list-table::
    :widths: 10 10 10
    :header-rows: 1

    *   - 番号
        - FFC / FPCコネクター
        - ESP32
    *   - 1
        - Y0
        - NC
    *   - 2
        - Y1
        - NC
    *   - 3
        - Y4
        - IO19
    *   - 4
        - Y3
        - IO18
    *   - 5
        - Y5
        - IO21
    *   - 6
        - Y2
        - IO5
    *   - 7
        - Y6
        - IO36
    *   - 8
        - PCLK
        - IO22
    *   - 9
        - Y7
        - IO39
    *   - 10
        - DGND
        - GND
    *   - 11
        - Y8
        - IO34
    *   - 12
        - XCLK
        - IO0
    *   - 13
        - Y9
        - IO35
    *   - 14
        - DOVDD
        - 3.3V
    *   - 15
        - DVDD
        - 1.2V
    *   - 16
        - HREF
        - IO23
    *   - 17
        - PWDN
        - IO32
    *   - 18
        - VSYNC
        - IO25
    *   - 19
        - RESET
        - IO33
    *   - 20
        - SIO_C
        - IO27
    *   - 21
        - VADD
        - 2.8V
    *   - 22
        - SIO_D
        - IO26
    *   - 23
        - AGND
        - GND
    *   - 24
        - NC
        - NC
        
インターフェース挿入ガイド
-------------------------------

**コードのアップロード**

    ESP32 WROOM 32Eにコードをアップロードするには、Micro USBケーブルを使用してコンピュータに接続します。

    .. image:: img/plugin_esp32.png
        :width: 600
        :align: center

**Micro SDカードの挿入**

    Micro SDカードをやさしく押し込んで固定します。もう一度押すとカードが排出されます。

    .. image:: img/insert_sd.png
        :width: 600
        :align: center

**カメラの取り付け**

    カメラを接続する際は、FPCケーブルの黒いストライプが上向きで、コネクタに完全に挿入されていることを確認してください。

    .. raw:: html

        <video loop autoplay muted style = "max-width:100%">
            <source src="_static/video/plugin_camera.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

**バッテリーの電源と充電**

    バッテリーケーブルをバッテリーポートに慎重に挿入し、端子を押し上げないように注意します。端子が押し上げられても、ピンが壊れていなければ、元の位置に押し戻せば問題ありません。

    .. image:: img/plugin_battery.png
        :width: 500
        :align: center

    バッテリーが消耗した場合、5V/0.5AのMicro USBを接続して充電します。

    .. image:: img/battery_charge.png
        :width: 500
        :align: center
